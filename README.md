# tsync

**–°–∏—Å—Ç–µ–º–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ toolkit** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–±—â–∏–º–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–º–∏, —à–∞–±–ª–æ–Ω–∞–º–∏ –∏ —Ñ–∞–π–ª–∞–º–∏ –º–µ–∂–¥—É –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏.

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–û –ø—Ä–æ–µ–∫—Ç–µ](#–æ-–ø—Ä–æ–µ–∫—Ç–µ)
- [–ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#–∫–ª—é—á–µ–≤—ã–µ-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [–ö–æ–Ω—Ü–µ–ø—Ü–∏–∏](#–∫–æ–Ω—Ü–µ–ø—Ü–∏–∏)
- [–ü–æ–ª–∏—Ç–∏–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏](#–ø–æ–ª–∏—Ç–∏–∫–∏-—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏)
- [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
- [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CLI](#–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ-cli)
- [–ü—Ä–∏–º–µ—Ä—ã](#–ø—Ä–∏–º–µ—Ä—ã)
- [–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞](#—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)

## –û –ø—Ä–æ–µ–∫—Ç–µ

`tsync` —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –º–µ–∂–¥—É –ø—Ä–æ–µ–∫—Ç–∞–º–∏. –í–º–µ—Å—Ç–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –≤—Ä—É—á–Ω—É—é –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è git submodules, tsync –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞—Ç—å —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π toolkit-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–∑ –Ω–µ–≥–æ —Ñ–∞–π–ª—ã –≤ –≤–∞—à–∏ –ø—Ä–æ–µ–∫—Ç—ã —Å –≥–∏–±–∫–∏–º–∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏ –∏ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è–º–∏.

### –ü—Ä–æ–±–ª–µ–º–∞

–í –∫–æ–º–ø–∞–Ω–∏—è—Ö —Å –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤ —á–∞—Å—Ç–æ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ª–∏–Ω—Ç–µ—Ä–æ–≤ (ruff, black, mypy)
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å CI/CD –ø–∞–π–ø–ª–∞–π–Ω—ã
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –µ–¥–∏–Ω—ã–π —Å—Ç–∏–ª—å Dockerfile –∏ docker-compose
- –û–±–Ω–æ–≤–ª—è—Ç—å –æ–±—â–∏–µ —à–∞–±–ª–æ–Ω—ã –∏ —Å–∫—Ä–∏–ø—Ç—ã

### –†–µ—à–µ–Ω–∏–µ

tsync –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç:
- **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ** –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π (toolkit)
- **–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** —á–µ—Ä–µ–∑ git (—Ç–µ–≥–∏, –≤–µ—Ç–∫–∏, –∫–æ–º–º–∏—Ç—ã)
- **–ì–∏–±–∫–∏–µ –ø–æ–ª–∏—Ç–∏–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏** (–ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è, —à–∞–±–ª–æ–Ω–∏–∑–∞—Ü–∏—è, —Å–ª–∏—è–Ω–∏–µ)
- **–ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è** –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
- **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—é –ø–æ —Ç–µ–≥–∞–º** –¥–ª—è –≤—ã–±–æ—Ä–æ—á–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

## –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

‚úÖ **–ß–µ—Ç—ã—Ä–µ –ø–æ–ª–∏—Ç–∏–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:**
- `sync-strict` ‚Äî –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –ø–µ—Ä–µ–∑–∞–ø–∏—Å—å
- `init` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç
- `template` ‚Äî —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ Jinja2-—à–∞–±–ª–æ–Ω–æ–≤ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏
- `merge` ‚Äî —É–º–Ω–æ–µ —Å–ª–∏—è–Ω–∏–µ (YAML, JSON, —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã)

‚úÖ **–ì–∏–±–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö** —Å –∏–µ—Ä–∞—Ä—Ö–∏–µ–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤

‚úÖ **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤ –ø–æ —Ç–µ–≥–∞–º** (include/exclude)

‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–µ—Ä—Å–∏–π toolkit** —á–µ—Ä–µ–∑ git

‚úÖ **–õ–æ–∫–∞–ª—å–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ toolkit

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –ò–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/flux-guard/tsync.git
cd tsync

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
pip install -e .

# –ò–ª–∏ —Å dev-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
pip install -e ".[dev]"
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

```bash
tsync --version
```

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –°–æ–∑–¥–∞–π—Ç–µ toolkit-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

–°–æ–∑–¥–∞–π—Ç–µ Git-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å —Ñ–∞–π–ª–æ–º `.toolkit.yml`:

```yaml
toolkit_version: "1.0.0"

aliases:
  python-service:
    description: "–ë–∞–∑–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è Python-—Å–µ—Ä–≤–∏—Å–∞"
    components:
      - id: "linters"
        description: "–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ª–∏–Ω—Ç–µ—Ä–æ–≤"
        files:
          - source: "templates/python/.ruff.toml"
            destination: ".ruff.toml"
            policy: "sync-strict"

      - id: "dockerfile"
        description: "Dockerfile –¥–ª—è —Å–µ—Ä–≤–∏—Å–∞"
        var_schema:
          python_version:
            description: "–í–µ—Ä—Å–∏—è Python"
            required: true
        files:
          - source: "templates/python/Dockerfile.tpl"
            destination: "Dockerfile"
            policy: "template"
```

### 2. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤ –ø—Ä–æ–µ–∫—Ç–µ

–í –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ —Å–æ–∑–¥–∞–π—Ç–µ `.project.toolkit.yml`:

```yaml
provider:
  url: "git@github.com:your-company/toolkit.git"
  version: "v1.0.0"

vars:
  python_version: "3.11"

sync:
  - alias: "python-service"
```

### 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é

```bash
tsync
```

–ì–æ—Ç–æ–≤–æ! –§–∞–π–ª—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –∏–∑ toolkit –≤ –≤–∞—à –ø—Ä–æ–µ–∫—Ç.

## –ö–æ–Ω—Ü–µ–ø—Ü–∏–∏

### Provider (–ü–æ—Å—Ç–∞–≤—â–∏–∫)

**Provider** ‚Äî —ç—Ç–æ Git-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –Ω–∞–±–æ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π (toolkit). –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —Ñ–∞–π–ª–æ–º `.toolkit.yml`.

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
- **Aliases** ‚Äî –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞–±–æ—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **Components** ‚Äî –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –≥—Ä—É–ø–ø—ã —Ñ–∞–π–ª–æ–≤
- **Files** ‚Äî —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã —Å –ø–æ–ª–∏—Ç–∏–∫–∞–º–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- **Schema** ‚Äî –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

### Consumer (–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å)

**Consumer** ‚Äî —ç—Ç–æ –ø—Ä–æ–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç toolkit. –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —Ñ–∞–π–ª–æ–º `.project.toolkit.yml`.

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- –í—ã–±–æ—Ä alias –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—É—Ç–µ–π –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤ –ø–æ —Ç–µ–≥–∞–º
- –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

### Context (–ö–æ–Ω—Ç–µ–∫—Å—Ç)

**Context** ‚Äî –æ–±—ä–µ–∫—Ç, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã–π —Å—Ç—Ä–∞—Ç–µ–≥–∏—è–º —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π:
- –ü—É—Ç—å –∫ –∏—Å—Ö–æ–¥–Ω–æ–º—É —Ñ–∞–π–ª—É (–≤ toolkit)
- –ü—É—Ç—å –∫ —Ü–µ–ª–µ–≤–æ–º—É —Ñ–∞–π–ª—É (–≤ –ø—Ä–æ–µ–∫—Ç–µ)
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Ñ–∞–π–ª–∞
- –û–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
- –§–ª–∞–≥ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ü–µ–ª–µ–≤–æ–≥–æ —Ñ–∞–π–ª–∞

## –ü–æ–ª–∏—Ç–∏–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

### 1. `sync-strict` ‚Äî –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

–§–∞–π–ª –≤—Å–µ–≥–¥–∞ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤–µ—Ä—Å–∏–µ–π –∏–∑ toolkit. –õ–æ–∫–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–µ—Ä—è—é—Ç—Å—è.

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:** –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ª–∏–Ω—Ç–µ—Ä–æ–≤, CI/CD, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –µ–¥–∏–Ω—ã–º–∏.

```yaml
files:
  - source: "configs/.ruff.toml"
    destination: ".ruff.toml"
    policy: "sync-strict"
```

### 2. `init` ‚Äî –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

–§–∞–π–ª —Å–æ–∑–¥–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç. –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ–∞–π–ª—ã –Ω–µ —Ç—Ä–æ–≥–∞—é—Ç—Å—è.

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:** —Ñ–∞–π–ª—ã-—à–∞–±–ª–æ–Ω—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤—Å–µ–≥–¥–∞ –∫–∞—Å—Ç–æ–º–∏–∑–∏—Ä—É—é—Ç—Å—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, `.env.example`).

```yaml
files:
  - source: "templates/.env.example"
    destination: ".env"
    policy: "init"
```

### 3. `template` ‚Äî –®–∞–±–ª–æ–Ω–∏–∑–∞—Ü–∏—è

–§–∞–π–ª —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –∫–∞–∫ Jinja2-—à–∞–±–ª–æ–Ω —Å –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö.

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:** Dockerfile, Makefile, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –ø—Ä–æ–µ–∫—Ç–∞.

```yaml
files:
  - source: "templates/Dockerfile.tpl"
    destination: "Dockerfile"
    policy: "template"
```

**–ü—Ä–∏–º–µ—Ä —à–∞–±–ª–æ–Ω–∞:**
```dockerfile
FROM python:{{ python_version }}-slim
WORKDIR {{ workdir }}
```

### 4. `merge` ‚Äî –£–º–Ω–æ–µ —Å–ª–∏—è–Ω–∏–µ

–°–ª–∏—è–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º —Ñ–∞–π–ª–æ–º:
- **YAML/JSON**: —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ–µ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –∫–ª—é—á–µ–π
- **–¢–µ–∫—Å—Ç**: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Å—Ç—Ä–æ–∫

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:** `.gitignore`, `pyproject.toml`, `package.json`.

```yaml
files:
  - source: "templates/.gitignore"
    destination: ".gitignore"
    policy: "merge"
    merge_priority: "toolkit"  # –∏–ª–∏ "project"
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ú–∞–Ω–∏—Ñ–µ—Å—Ç Provider (.toolkit.yml)

```yaml
toolkit_version: "1.0.0"

aliases:
  service-name:
    description: "–û–ø–∏—Å–∞–Ω–∏–µ –Ω–∞–±–æ—Ä–∞"
    vars:
      # –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è alias
      default_var: "value"

    components:
      - id: "component-id"
        description: "–û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞"

        var_schema:
          # –ö–æ–Ω—Ç—Ä–∞–∫—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
          required_var:
            description: "–û–ø–∏—Å–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π"
            required: true
          optional_var:
            description: "–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è"
            required: false
            default: "default_value"

        vars:
          # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
          component_var: "value"

        files:
          - source: "path/in/toolkit"
            destination: "path/in/project"
            policy: "sync-strict"  # –∏–ª–∏ "init", "template", "merge"
            merge_as: "yaml"  # –¥–ª—è policy: merge
            merge_priority: "toolkit"  # –∏–ª–∏ "project"
            tags: ["tag1", "tag2"]
            vars:
              file_var: "value"
```

### –ú–∞–Ω–∏—Ñ–µ—Å—Ç Consumer (.project.toolkit.yml)

```yaml
provider:
  url: "git@github.com:company/toolkit.git"
  version: "v1.0.0"  # —Ç–µ–≥, –≤–µ—Ç–∫–∞ –∏–ª–∏ commit hash

vars:
  # –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç–∞
  python_version: "3.11"

sync:
  - alias: "python-service"
    overrides:
      - id: "dockerfile"
        skip: false
        destination_root: "docker/"
        include_tags: ["production"]
        exclude_tags: ["development"]
        vars:
          # –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
          python_version: "3.12"
        files:
          - source: "templates/Dockerfile.tpl"
            destination: "Dockerfile.prod"
            skip: false
            vars:
              # –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–∞
              workdir: "/app"
```

### –ò–µ—Ä–∞—Ä—Ö–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –æ—Ç –Ω–∏–∑–∫–æ–≥–æ –∫ –≤—ã—Å–æ–∫–æ–º—É)

1. –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ consumer (`vars` –≤ –∫–æ—Ä–Ω–µ) ‚Äî –≤–∫–ª—é—á–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ variant
2. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ alias provider (`alias.vars`)
3. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ provider (`component.vars`)
4. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ consumer (`override.vars`)
5. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª–∞ provider (`file.vars`)
6. **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª–∞ consumer** (`override.files[].vars`) ‚Äî –Ω–∞–∏–≤—ã—Å—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CLI

```bash
# –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ç–µ–∫—É—â–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
tsync

# –£–∫–∞–∑–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
tsync --project-dir /path/to/project

# –£–∫–∞–∑–∞—Ç—å –∫—ç—à –¥–ª—è toolkit
tsync --cache-dir ~/.tsync/cache

# –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
tsync --verbose
tsync -v

# –ü–æ–∫–∞–∑–∞—Ç—å –≤–µ—Ä—Å–∏—é
tsync --version

# –°–ø—Ä–∞–≤–∫–∞
tsync --help
```

### –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞:** `.project.toolkit.yml` (–≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞)
- **–ö—ç—à toolkit:** `~/.tsync/cache/` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

## –ü—Ä–∏–º–µ—Ä—ã

### –ü—Ä–∏–º–µ—Ä 1: –û–±—â–∏–µ –ª–∏–Ω—Ç–µ—Ä—ã –¥–ª—è Python-–ø—Ä–æ–µ–∫—Ç–æ–≤

**Toolkit (.toolkit.yml):**
```yaml
toolkit_version: "1.0.0"

aliases:
  python-linters:
    description: "–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –ª–∏–Ω—Ç–µ—Ä—ã –¥–ª—è Python"
    components:
      - id: "linters"
        description: "–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ ruff, black, mypy"
        files:
          - source: "python/.ruff.toml"
            destination: ".ruff.toml"
            policy: "sync-strict"

          - source: "python/pyproject.toml"
            destination: "pyproject.toml"
            policy: "merge"
            merge_as: "yaml"
```

**–ü—Ä–æ–µ–∫—Ç (.project.toolkit.yml):**
```yaml
provider:
  url: "git@github.com:company/toolkit.git"
  version: "main"

sync:
  - alias: "python-linters"
```

### –ü—Ä–∏–º–µ—Ä 2: Dockerfile —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏

**Toolkit ‚Äî Dockerfile.tpl:**
```dockerfile
FROM python:{{ python_version }}-slim

WORKDIR {{ workdir }}

RUN pip install --no-cache-dir poetry=={{ poetry_version }}

COPY . .

RUN poetry install --no-dev

CMD ["python", "{{ entrypoint }}"]
```

**Toolkit (.toolkit.yml):**
```yaml
aliases:
  python-service:
    components:
      - id: "dockerfile"
        var_schema:
          python_version:
            description: "–í–µ—Ä—Å–∏—è Python"
            required: true
          workdir:
            description: "–†–∞–±–æ—á–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è"
            default: "/app"
          poetry_version:
            description: "–í–µ—Ä—Å–∏—è Poetry"
            default: "1.7.1"
          entrypoint:
            description: "–¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è"
            required: true
        files:
          - source: "templates/Dockerfile.tpl"
            destination: "Dockerfile"
            policy: "template"
```

**–ü—Ä–æ–µ–∫—Ç (.project.toolkit.yml):**
```yaml
provider:
  url: "git@github.com:company/toolkit.git"
  version: "v2.0.0"

vars:
  python_version: "3.11"
  entrypoint: "main.py"

sync:
  - alias: "python-service"
```

### –ü—Ä–∏–º–µ—Ä 3: –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–µ–≥–∞–º

**Toolkit (.toolkit.yml):**
```yaml
aliases:
  full-stack:
    components:
      - id: "configs"
        files:
          - source: "backend/Dockerfile"
            destination: "backend/Dockerfile"
            policy: "sync-strict"
            tags: ["backend", "docker"]

          - source: "frontend/Dockerfile"
            destination: "frontend/Dockerfile"
            policy: "sync-strict"
            tags: ["frontend", "docker"]

          - source: "nginx/nginx.conf"
            destination: "nginx.conf"
            policy: "init"
            tags: ["nginx", "production"]
```

**–ü—Ä–æ–µ–∫—Ç (—Ç–æ–ª—å–∫–æ backend):**
```yaml
sync:
  - alias: "full-stack"
    overrides:
      - id: "configs"
        include_tags: ["backend"]  # –¢–æ–ª—å–∫–æ backend —Ñ–∞–π–ª—ã
```

**–ü—Ä–æ–µ–∫—Ç (–±–µ–∑ production):**
```yaml
sync:
  - alias: "full-stack"
    overrides:
      - id: "configs"
        exclude_tags: ["production"]  # –í—Å—ë –∫—Ä–æ–º–µ production
```

### –ü—Ä–∏–º–µ—Ä 4: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Alias vars –¥–ª—è –æ–±—â–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫

**Toolkit (.toolkit.yml):**
```yaml
aliases:
  python-app:
    description: "Python –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"
    vars:
      # –û–±—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –≤ —ç—Ç–æ–º alias
      python_version: "3.11"
      app_env: "production"
      log_level: "INFO"
    components:
      - id: "dockerfile"
        files:
          - source: "templates/Dockerfile.j2"
            destination: "Dockerfile"
            policy: "template"

      - id: "config"
        files:
          - source: "templates/config.yaml.j2"
            destination: "config/app.yaml"
            policy: "template"
```

**–ü—Ä–æ–µ–∫—Ç (.project.toolkit.yml):**
```yaml
provider:
  url: "git@github.com:company/toolkit.git"
  version: "v1.0.0"

vars:
  app_name: "my-service"  # –ì–ª–æ–±–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –ø—Ä–æ–µ–∫—Ç–∞

sync:
  - alias: "python-app"
    # python_version, app_env, log_level –Ω–∞—Å–ª–µ–¥—É—é—Ç—Å—è –∏–∑ alias.vars
    # –∏ –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã –≤–æ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö
    overrides:
      - id: "config"
        vars:
          log_level: "DEBUG"  # –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
```

–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ:
- `python_version: "3.11"` –∏ `app_env: "production"` –¥–æ—Å—Ç—É–ø–Ω—ã –≤–æ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö alias
- `log_level: "INFO"` –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –Ω–∞ `"DEBUG"` –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ `config`
- `app_name: "my-service"` –¥–æ—Å—Ç—É–ø–µ–Ω –≥–ª–æ–±–∞–ª—å–Ω–æ –∏–∑ –∫–æ—Ä–Ω—è `.project.toolkit.yml`

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python >= 3.10
- Git

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å dev-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
pip install -e ".[dev]"
```

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
pytest
pytest --cov=tsync --cov-report=html
```

### –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞

```bash
# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
black src/

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∏–ª—è
ruff check src/

# –ê–≤—Ç–æ–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
ruff check --fix src/
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤

```bash
mypy src/
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
tsync/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îî‚îÄ‚îÄ tsync/
‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
‚îÇ       ‚îú‚îÄ‚îÄ cli.py              # CLI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îÇ       ‚îú‚îÄ‚îÄ app.py              # –ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ       ‚îú‚îÄ‚îÄ models/             # Pydantic –º–æ–¥–µ–ª–∏
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ consumer.py     # –ú–æ–¥–µ–ª–∏ consumer
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ provider.py     # –ú–æ–¥–µ–ª–∏ provider
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ context.py      # –ö–æ–Ω—Ç–µ–∫—Å—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ policy.py       # –ü–æ–ª–∏—Ç–∏–∫–∏
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ merge.py        # –¢–∏–ø—ã —Å–ª–∏—è–Ω–∏—è
‚îÇ       ‚îú‚îÄ‚îÄ handlers/           # –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ base.py         # –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ sync_strict.py  # sync-strict
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ init.py         # init
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ template.py     # template
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ merge.py        # merge (–¥–∏—Å–ø–µ—Ç—á–µ—Ä)
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ mergers/        # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–ª–∏—è–Ω–∏—è
‚îÇ       ‚îÇ       ‚îú‚îÄ‚îÄ yaml.py
‚îÇ       ‚îÇ       ‚îú‚îÄ‚îÄ json.py
‚îÇ       ‚îÇ       ‚îî‚îÄ‚îÄ text.py
‚îÇ       ‚îî‚îÄ‚îÄ services/           # –°–µ—Ä–≤–∏—Å—ã
‚îÇ           ‚îú‚îÄ‚îÄ sync.py         # –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
‚îÇ           ‚îú‚îÄ‚îÄ git.py          # Git –æ–ø–µ—Ä–∞—Ü–∏–∏
‚îÇ           ‚îú‚îÄ‚îÄ fs.py           # –§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞
‚îÇ           ‚îî‚îÄ‚îÄ template.py     # –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ —à–∞–±–ª–æ–Ω–æ–≤
‚îú‚îÄ‚îÄ tests/                      # –¢–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ pyproject.toml             # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ README.md                  # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îî‚îÄ‚îÄ CLAUDE.md                  # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è Claude Code
```

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- **Strategy Pattern**: –ö–∞–∂–¥–∞—è –ø–æ–ª–∏—Ç–∏–∫–∞ ‚Äî –æ—Ç–¥–µ–ª—å–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è
- **Service Layer**: –ò–∑–æ–ª—è—Ü–∏—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
- **Dependency Injection**: –°–µ—Ä–≤–∏—Å—ã –∏–Ω–∂–µ–∫—Ç—è—Ç—Å—è –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã
- **Pydantic Models**: –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License. –°–º. [LICENSE](LICENSE) –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

## –ê–≤—Ç–æ—Ä—ã

- **flux-guard** - [GitHub](https://github.com/flux-guard)

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã –∏–ª–∏ –≤–æ–ø—Ä–æ—Å—ã:
- –°–æ–∑–¥–∞–π—Ç–µ [Issue](https://github.com/flux-guard/tsync/issues)
- –ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ [CLAUDE.md](CLAUDE.md) –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

---

**tsync** ‚Äî —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø—Ä–æ—Å—Ç–æ–π! üöÄ
